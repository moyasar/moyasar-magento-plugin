/*
 * Moyasar Payment Form v1.5.0
 * (c) 2020-2021 Moyasar Ltd.
 */
var r,n;r=this,n=function(){return function(){var r={838:function(r,n,t){t.d(n,{default:function(){return _n}}),t(624),t(280),t(70);var i=function(r){var n=this.constructor;return this.then((function(t){return n.resolve(r()).then((function(){return t}))}),(function(t){return n.resolve(r()).then((function(){return n.reject(t)}))}))},o=function(r){return new this((function(n,t){if(!r||"undefined"===typeof r.length)return t(new TypeError(typeof r+" "+r+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var i=Array.prototype.slice.call(r);if(0===i.length)return n([]);var o=i.length;function e(r,t){if(t&&("object"===typeof t||"function"===typeof t)){var u=t.then;if("function"===typeof u)return void u.call(t,(function(n){e(r,n)}),(function(t){i[r]={status:"rejected",reason:t},0===--o&&n(i)}))}i[r]={status:"fulfilled",value:t},0===--o&&n(i)}for(var u=0;u<i.length;u++)e(u,i[u])}))},e=setTimeout;function u(r){return Boolean(r&&"undefined"!==typeof r.length)}function s(){}function c(r){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!==typeof r)throw new TypeError("not a function");this.t=0,this.i=!1,this.u=void 0,this.m=[],h(r,this)}function l(r,n){for(;3===r.t;)r=r.u;0!==r.t?(r.i=!0,c.h((function(){var t=1===r.t?n.onFulfilled:n.onRejected;if(null!==t){var i;try{i=t(r.u)}catch(k){return void f(n.promise,k)}a(n.promise,i)}else(1===r.t?a:f)(n.promise,r.u)}))):r.m.push(n)}function a(r,n){try{if(n===r)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"===typeof n||"function"===typeof n)){var t=n.then;if(n instanceof c)return r.t=3,r.u=n,void m(r);if("function"===typeof t)return void h((i=t,o=n,function(){i.apply(o,arguments)}),r)}r.t=1,r.u=n,m(r)}catch(k){f(r,k)}var i,o}function f(r,n){r.t=2,r.u=n,m(r)}function m(r){2===r.t&&0===r.m.length&&c.h((function(){r.i||c.p(r.u)}));for(var n=0,t=r.m.length;n<t;n++)l(r,r.m[n]);r.m=null}function d(r,n,t){this.onFulfilled="function"===typeof r?r:null,this.onRejected="function"===typeof n?n:null,this.promise=t}function h(r,n){var t=!1;try{r((function(r){t||(t=!0,a(n,r))}),(function(r){t||(t=!0,f(n,r))}))}catch(i){if(t)return;t=!0,f(n,i)}}c.prototype.catch=function(r){return this.then(null,r)},c.prototype.then=function(r,n){var t=new this.constructor(s);return l(this,new d(r,n,t)),t},c.prototype.finally=i,c.all=function(r){return new c((function(n,t){if(!u(r))return t(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(r);if(0===i.length)return n([]);var o=i.length;function e(r,u){try{if(u&&("object"===typeof u||"function"===typeof u)){var s=u.then;if("function"===typeof s)return void s.call(u,(function(n){e(r,n)}),t)}i[r]=u,0===--o&&n(i)}catch(c){t(c)}}for(var s=0;s<i.length;s++)e(s,i[s])}))},c.allSettled=o,c.resolve=function(r){return r&&"object"===typeof r&&r.constructor===c?r:new c((function(n){n(r)}))},c.reject=function(r){return new c((function(n,t){t(r)}))},c.race=function(r){return new c((function(n,t){if(!u(r))return t(new TypeError("Promise.race accepts an array"));for(var i=0,o=r.length;i<o;i++)c.resolve(r[i]).then(n,t)}))},c.h="function"===typeof setImmediate&&function(r){setImmediate(r)}||function(r){e(r,0)},c.p=function(r){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",r)};var p=c,_=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t.g)return t.g;throw new Error("unable to locate global object")}();"function"!==typeof _.Promise?_.Promise=p:_.Promise.prototype.finally?_.Promise.allSettled||(_.Promise.allSettled=o):_.Promise.prototype.finally=i;var y,v,b,w,g,O,j,P={},k=[],I=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(r,n){for(var t in n)r[t]=n[t];return r}function C(r){var n=r.parentNode;n&&n.removeChild(r)}function E(r,n,t){var i,o,e,u=arguments,s={};for(e in n)"key"==e?i=n[e]:"ref"==e?o=n[e]:s[e]=n[e];if(arguments.length>3)for(t=[t],e=3;e<arguments.length;e++)t.push(u[e]);if(null!=t&&(s.children=t),"function"==typeof r&&null!=r.defaultProps)for(e in r.defaultProps)void 0===s[e]&&(s[e]=r.defaultProps[e]);return S(r,s,i,o,null)}function S(r,n,t,i,o){var e={type:r,props:n,key:t,ref:i,_:null,v:null,O:0,j:null,P:void 0,k:null,I:null,constructor:void 0,A:o};return null==o&&(e.A=e),null!=y.vnode&&y.vnode(e),e}function x(r){return r.children}function M(r,n){this.props=r,this.context=n}function R(r,n){if(null==n)return r.v?R(r.v,r.v._.indexOf(r)+1):null;for(var t;n<r._.length;n++)if(null!=(t=r._[n])&&null!=t.j)return t.j;return"function"==typeof r.type?R(r):null}function F(r){var n,t;if(null!=(r=r.v)&&null!=r.k){for(r.j=r.k.base=null,n=0;n<r._.length;n++)if(null!=(t=r._[n])&&null!=t.j){r.j=r.k.base=t.j;break}return F(r)}}function T(r){(!r.P&&(r.P=!0)&&b.push(r)&&!q.C++||g!==y.debounceRendering)&&((g=y.debounceRendering)||w)(q)}function q(){for(var r;q.C=b.length;)r=b.sort((function(r,n){return r.A.O-n.A.O})),b=[],r.some((function(r){var n,t,i,o,e,u,s;r.P&&(u=(e=(n=r).A).j,(s=n.S)&&(t=[],(i=A({},e)).A=i,o=V(s,e,i,n.M,void 0!==s.ownerSVGElement,null!=e.I?[u]:null,t,null==u?R(e):u,e.I),K(t,e),o!=u&&F(e)))}))}function L(r,n,t,i,o,e,u,s,c,l){var a,f,m,d,h,p,_,y=i&&i._||k,v=y.length;for(c==P&&(c=null!=u?u[0]:v?R(i,0):null),t._=[],a=0;a<n.length;a++)if(null!=(d=t._[a]=null==(d=n[a])||"boolean"==typeof d?null:"string"==typeof d||"number"==typeof d?S(null,d,null,null,d):Array.isArray(d)?S(x,{children:d},null,null,null):null!=d.j||null!=d.k?S(d.type,d.props,d.key,null,d.A):d)){if(d.v=t,d.O=t.O+1,null===(m=y[a])||m&&d.key==m.key&&d.type===m.type)y[a]=void 0;else for(f=0;f<v;f++){if((m=y[f])&&d.key==m.key&&d.type===m.type){y[f]=void 0;break}m=null}h=V(r,d,m=m||P,o,e,u,s,c,l),(f=d.ref)&&m.ref!=f&&(_||(_=[]),m.ref&&_.push(m.ref,null,d),_.push(f,d.k||h,d)),null!=h?(null==p&&(p=h),c=D(r,d,m,y,u,h,c),l||"option"!=t.type?"function"==typeof t.type&&(t.P=c):r.value=""):c&&m.j==c&&c.parentNode!=r&&(c=R(m))}if(t.j=p,null!=u&&"function"!=typeof t.type)for(a=u.length;a--;)null!=u[a]&&C(u[a]);for(a=v;a--;)null!=y[a]&&Z(y[a],y[a]);if(_)for(a=0;a<_.length;a++)W(_[a],_[++a],_[++a])}function D(r,n,t,i,o,e,u){var s,c,l;if(void 0!==n.P)s=n.P,n.P=void 0;else if(o==t||e!=u||null==e.parentNode)r:if(null==u||u.parentNode!==r)r.appendChild(e),s=null;else{for(c=u,l=0;(c=c.nextSibling)&&l<i.length;l+=2)if(c==e)break r;r.insertBefore(e,u),s=u}return void 0!==s?s:e.nextSibling}function B(r,n,t){"-"===n[0]?r.setProperty(n,t):r[n]=null==t?"":"number"!=typeof t||I.test(n)?t:t+"px"}function N(r,n,t,i,o){var e,u,s;if(o&&"className"==n&&(n="class"),"style"===n)if("string"==typeof t)r.style.cssText=t;else{if("string"==typeof i&&(r.style.cssText=i=""),i)for(n in i)t&&n in t||B(r.style,n,"");if(t)for(n in t)i&&t[n]===i[n]||B(r.style,n,t[n])}else"o"===n[0]&&"n"===n[1]?(e=n!==(n=n.replace(/Capture$/,"")),(u=n.toLowerCase())in r&&(n=u),n=n.slice(2),r.l||(r.l={}),r.l[n+e]=t,s=e?G:H,t?i||r.addEventListener(n,s,e):r.removeEventListener(n,s,e)):"list"!==n&&"tagName"!==n&&"form"!==n&&"type"!==n&&"size"!==n&&"download"!==n&&"href"!==n&&!o&&n in r?r[n]=null==t?"":t:"function"!=typeof t&&"dangerouslySetInnerHTML"!==n&&(n!==(n=n.replace(/xlink:?/,""))?null==t||!1===t?r.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):r.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),t):null==t||!1===t&&!/^ar/.test(n)?r.removeAttribute(n):r.setAttribute(n,t))}function H(r){this.l[r.type+!1](y.event?y.event(r):r)}function G(r){this.l[r.type+!0](y.event?y.event(r):r)}function $(r,n,t){var i,o;for(i=0;i<r._.length;i++)(o=r._[i])&&(o.v=r,o.j&&("function"==typeof o.type&&o._.length>1&&$(o,n,t),n=D(t,o,o,r._,null,o.j,n),"function"==typeof r.type&&(r.P=n)))}function V(r,n,t,i,o,e,u,s,c){var l,a,f,m,d,h,p,_,v,b,w,g=n.type;if(void 0!==n.constructor)return null;null!=t.I&&(c=t.I,s=n.j=t.j,n.I=null,e=[s]),(l=y.O)&&l(n);try{r:if("function"==typeof g){if(_=n.props,v=(l=g.contextType)&&i[l.k],b=l?v?v.props.value:l.v:i,t.k?p=(a=n.k=t.k).v=a.R:("prototype"in g&&g.prototype.render?n.k=a=new g(_,b):(n.k=a=new M(_,b),a.constructor=g,a.render=Y),v&&v.sub(a),a.props=_,a.state||(a.state={}),a.context=b,a.M=i,f=a.P=!0,a.I=[]),null==a.F&&(a.F=a.state),null!=g.getDerivedStateFromProps&&(a.F==a.state&&(a.F=A({},a.F)),A(a.F,g.getDerivedStateFromProps(_,a.F))),m=a.props,d=a.state,f)null==g.getDerivedStateFromProps&&null!=a.componentWillMount&&a.componentWillMount(),null!=a.componentDidMount&&a.I.push(a.componentDidMount);else{if(null==g.getDerivedStateFromProps&&_!==m&&null!=a.componentWillReceiveProps&&a.componentWillReceiveProps(_,b),!a.j&&null!=a.shouldComponentUpdate&&!1===a.shouldComponentUpdate(_,a.F,b)||n.A===t.A){a.props=_,a.state=a.F,n.A!==t.A&&(a.P=!1),a.A=n,n.j=t.j,n._=t._,a.I.length&&u.push(a),$(n,s,r);break r}null!=a.componentWillUpdate&&a.componentWillUpdate(_,a.F,b),null!=a.componentDidUpdate&&a.I.push((function(){a.componentDidUpdate(m,d,h)}))}a.context=b,a.props=_,a.state=a.F,(l=y.C)&&l(n),a.P=!1,a.A=n,a.S=r,l=a.render(a.props,a.state,a.context),a.state=a.F,null!=a.getChildContext&&(i=A(A({},i),a.getChildContext())),f||null==a.getSnapshotBeforeUpdate||(h=a.getSnapshotBeforeUpdate(m,d)),w=null!=l&&l.type==x&&null==l.key?l.props.children:l,L(r,Array.isArray(w)?w:[w],n,t,i,o,e,u,s,c),a.base=n.j,n.I=null,a.I.length&&u.push(a),p&&(a.R=a.v=null),a.j=!1}else null==e&&n.A===t.A?(n._=t._,n.j=t.j):n.j=U(t.j,n,t,i,o,e,u,c);(l=y.diffed)&&l(n)}catch(r){n.A=null,(c||null!=e)&&(n.j=s,n.I=!!c,e[e.indexOf(s)]=null),y.j(r,n,t)}return n.j}function K(r,n){y.k&&y.k(n,r),r.some((function(n){try{r=n.I,n.I=[],r.some((function(r){r.call(n)}))}catch(r){y.j(r,n.A)}}))}function U(r,n,t,i,o,e,u,s){var c,l,a,f,m,d=t.props,h=n.props;if(o="svg"===n.type||o,null!=e)for(c=0;c<e.length;c++)if(null!=(l=e[c])&&((null===n.type?3===l.nodeType:l.localName===n.type)||r==l)){r=l,e[c]=null;break}if(null==r){if(null===n.type)return document.createTextNode(h);r=o?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type,h.is&&{is:h.is}),e=null,s=!1}if(null===n.type)d===h||s&&r.data===h||(r.data=h);else{if(null!=e&&(e=k.slice.call(r.childNodes)),a=(d=t.props||P).dangerouslySetInnerHTML,f=h.dangerouslySetInnerHTML,!s){if(null!=e)for(d={},m=0;m<r.attributes.length;m++)d[r.attributes[m].name]=r.attributes[m].value;(f||a)&&(f&&(a&&f.T==a.T||f.T===r.innerHTML)||(r.innerHTML=f&&f.T||""))}(function(r,n,t,i,o){var e;for(e in t)"children"===e||"key"===e||e in n||N(r,e,null,t[e],i);for(e in n)o&&"function"!=typeof n[e]||"children"===e||"key"===e||"value"===e||"checked"===e||t[e]===n[e]||N(r,e,n[e],t[e],i)})(r,h,d,o,s),f?n._=[]:(c=n.props.children,L(r,Array.isArray(c)?c:[c],n,t,i,"foreignObject"!==n.type&&o,e,u,P,s)),s||("value"in h&&void 0!==(c=h.value)&&(c!==r.value||"progress"===n.type&&!c)&&N(r,"value",c,d.value,!1),"checked"in h&&void 0!==(c=h.checked)&&c!==r.checked&&N(r,"checked",c,d.checked,!1))}return r}function W(r,n,t){try{"function"==typeof r?r(n):r.current=n}catch(r){y.j(r,t)}}function Z(r,n,t){var i,o,e;if(y.unmount&&y.unmount(r),(i=r.ref)&&(i.current&&i.current!==r.j||W(i,null,n)),t||"function"==typeof r.type||(t=null!=(o=r.j)),r.j=r.P=void 0,null!=(i=r.k)){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){y.j(r,n)}i.base=i.S=null}if(i=r._)for(e=0;e<i.length;e++)i[e]&&Z(i[e],n,t);null!=o&&C(o)}function Y(r,n,t){return this.constructor(r,t)}y={j:function(r,n){for(var t,i,o,e=n.I;n=n.v;)if((t=n.k)&&!t.v)try{if((i=t.constructor)&&null!=i.getDerivedStateFromError&&(t.setState(i.getDerivedStateFromError(r)),o=t.P),null!=t.componentDidCatch&&(t.componentDidCatch(r),o=t.P),o)return n.I=e,t.R=t}catch(n){r=n}throw r}},v=function(r){return null!=r&&void 0===r.constructor},M.prototype.setState=function(r,n){var t;t=null!=this.F&&this.F!==this.state?this.F:this.F=A({},this.state),"function"==typeof r&&(r=r(A({},t),this.props)),r&&A(t,r),null!=r&&this.A&&(n&&this.I.push(n),T(this))},M.prototype.forceUpdate=function(r){this.A&&(this.j=!0,r&&this.I.push(r),T(this))},M.prototype.render=x,b=[],w="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q.C=0,O=P,j=0;var z=JSON.parse('{"ADP":0,"AFN":0,"ALL":0,"AMD":0,"BHD":3,"BIF":0,"BYN":2,"BYR":0,"CAD":2,"CHF":2,"CLF":4,"CLP":0,"COP":0,"CRC":0,"CZK":0,"default":2,"DJF":0,"DKK":2,"ESP":0,"GNF":0,"GYD":0,"HUF":0,"IDR":0,"IQD":0,"IRR":0,"ISK":0,"ITL":0,"JOD":3,"JPY":0,"KMF":0,"KPW":0,"KRW":0,"KWD":3,"LAK":0,"LBP":0,"LUF":0,"LYD":3,"MGA":0,"MGF":0,"MMK":0,"MNT":0,"MRO":0,"MUR":0,"NOK":0,"OMR":3,"PKR":0,"PYG":0,"RSD":0,"RWF":0,"SEK":0,"SLL":0,"SOS":0,"STD":0,"SYP":0,"TMM":0,"TND":3,"TRL":0,"TWD":0,"TZS":0,"UGX":0,"UYI":0,"UYW":4,"UZS":0,"VEF":0,"VND":0,"VUV":0,"XAF":0,"XOF":0,"XPF":0,"YER":0,"ZMK":0,"ZWD":0}'),J=function(){function r(r){this.values=r}return r.prototype.map=function(n){return new r(this.values.map(n))},r.prototype.filter=function(n){return new r(this.values.filter(n))},r.prototype.findIndex=function(r){for(var n=0;n<this.values.length;++n)if(r(this.values[n]))return n;return-1},r.prototype.has=function(r){return this.findIndex(r)>-1},r.prototype.count=function(){return this.values.length},r.prototype.toArray=function(){return this.values},r.prototype.any=function(){return this.count()>0},r.prototype.empty=function(){return 0==this.count()},r}();function X(r){return r.replace(/[\u0660-\u0669]/g,(function(r){return(r.charCodeAt(0)-"\u0660".charCodeAt(0)).toString()})).replace(/[\u06F0-\u06F9]/g,(function(r){return(r.charCodeAt(0)-"\u06f0".charCodeAt(0)).toString()}))}function Q(r){return r instanceof Array||(r=[r]),r}function rr(r){return r.filter((function(r){return null!=r})).join(" ")}function nr(r,n,t){return void 0===n&&(n={}),void 0===t&&(t=null),gr.q(r,n,t)}function tr(r){var n=[];return r instanceof Array?n=n.concat(r):n.push(r),new J(n)}var ir=function(){function r(){}return r.prototype.L=function(r){if("string"==typeof r&&(r=document.querySelector(r)),r instanceof Element)return r;throw new Error("Element: "+r+" is not a valid element")},r.prototype.D=function(r){return"string"===typeof r&&/^https?:\/\/.+/.test(r)},r}(),or=function(){function r(){this.element=null,this.language=null,this.publishable_api_key=null,this.translations=null,this.methods=null,this.amount=null,this.currency=null,this.description=null,this.callback_url=null,this.supported_networks=null,this.metadata=null,this.on_initiating=null,this.on_completed=null,this.on_failure=null,this.on_redirect=null,this.apple_pay_version=null,this.apple_pay_merchant_capabilities=null,this.apple_pay_label=null,this.apple_pay_validate_merchant_url=null,this.apple_pay_country=null,this.apple_pay_supported_countries=["SA"],this.language=document.documentElement.lang||"en",this.language=this.language.replace(/_.+/g,"").replace(/\-.+/g,""),this.base_url="https://api.moyasar.com",this.helper=new ir,this.fixed_width=!0,this.B=this.B.bind(this)}return r.prototype.B=function(r,n){void 0===n&&(n=null);var t=tr(["apple_pay"]),i=function(i){var e=n?n+"_"+i:i;"object"===typeof r[e]&&t.has((function(r){return r==i}))?o.B(r[e],e):e in o&&(o[e]=r[i])},o=this;for(var e in r)i(e)},r.prototype.N=function(r){if("object"===typeof r){var n=tr(["callback_url","description"]),t=function(r){if(!n.has((function(n){return n==r})))throw new Error("Chaning "+r+" is not allowed!")};for(var i in r)t(i);this.B(r)}},r.prototype.H=function(){return this.helper.L(this.element)},r.prototype.G=function(){switch(getComputedStyle(this.H()).direction.toLowerCase()){case"rtl":return"rtl";case"ltr":return"ltr"}return"auto"},r.prototype.$=function(){return this.fixed_width},r.prototype.V=function(){return this.language||"en"},r.prototype.K=function(){return this.translations},r.prototype.U=function(){return this.methods instanceof Array?this.methods:["applepay","creditcard","stcpay"]},r.prototype.W=function(){if(!/^https:\/\/api(mig)?.moyasar.com(\/)?$/.test(this.base_url))throw new Error("Invalid base URL");return this.base_url},r.prototype.Z=function(){if("string"!==typeof this.publishable_api_key)throw new Error("Publishable API Key is missing");if(!/^pk_(test|live)_.{40}$/.test(this.publishable_api_key))throw new Error("Invalid Publishable API Key");return this.publishable_api_key},r.prototype.Y=function(){try{return!/^pk_live_/.test(this.Z())}catch(r){return!0}},r.prototype.J=function(){return"https:"===location.protocol.toLowerCase()},r.prototype.X=function(){try{var r=parseInt(this.amount||"-1");if(r<1)throw new Error;return r}catch(n){throw new Error("Amount must be a positive integer")}},r.prototype.rr=function(){var r,n=this.nr(),t=null!==(r=z[n])&&void 0!==r?r:z.default,i=(this.X()/Math.pow(10,t)).toFixed(t);return/\.\d\d0$/.test(i)&&(i=i.replace(/0$/,"")),i},r.prototype.nr=function(){if("string"!==typeof this.currency||!/^[A-Z]{3}$/.test(this.currency))throw new Error("Currency "+this.currency+" is invalid");return this.currency},r.prototype.tr=function(){if(null===this.apple_pay_country)throw new Error("Country is required for Apple Pay");if("string"!==typeof this.apple_pay_country||!/^[A-Z]{2}$/.test(this.apple_pay_country))throw new Error("Invalid country "+this.apple_pay_country);return this.apple_pay_country},r.prototype.ir=function(){if("string"!==typeof this.description||this.description.trim().length<1)throw new Error("Description must be a string");return this.description},r.prototype.er=function(){if(!this.helper.D(this.callback_url))throw new Error("Callback URL is invalid");return this.callback_url},r.prototype.ur=function(){return this.on_initiating},r.prototype.sr=function(){return this.on_completed},r.prototype.cr=function(){return this.on_failure},r.prototype.lr=function(){return this.on_redirect},r.prototype.mr=function(){return this.supported_networks instanceof Array?this.supported_networks:["mada","visa","mastercard"]},r.prototype.dr=function(r){return tr(this.mr()).has((function(n){return n.toLowerCase()==r.toLowerCase()}))},r.prototype.hr=function(){return this.mr().map((function(r){return"mastercard"==(r=r.toLowerCase())?"masterCard":r}))},r.prototype.pr=function(){return this.apple_pay_merchant_capabilities instanceof Array?this.apple_pay_merchant_capabilities:["supports3DS","supportsCredit","supportsDebit"]},r.prototype._r=function(){if("string"!==typeof this.apple_pay_label||0==this.apple_pay_label.trim().length)throw new Error("Apple Pay label is required");return this.apple_pay_label},r.prototype.yr=function(){if("string"!==typeof this.apple_pay_validate_merchant_url||!/^https?:\/\/.+/.test(this.apple_pay_validate_merchant_url))throw new Error("Validate Merchat URL is required for Apple Pay");return this.apple_pay_validate_merchant_url},r.prototype.vr=function(){if(null===this.apple_pay_version)return 6;if(!Number.isInteger(this.apple_pay_version)||this.apple_pay_version<1)throw new Error("Apple Pay version must be a positive integer");return this.apple_pay_version},r.prototype.br=function(){if(null==this.apple_pay_supported_countries)return["SA"];if(!(this.apple_pay_supported_countries instanceof Array))throw new Error("Apple Pay supported_countries config must be an array.");if(!this.apple_pay_supported_countries.every((function(r){return"string"===typeof r&&2==r.length})))throw new Error("Apple Pay supported_countries entries must be ISO 3166 country codes.");return this.apple_pay_supported_countries},r.prototype.wr=function(){return tr(this.U()).has((function(r){return"applepay"==r}))},r.prototype.gr=function(){if(null==this.metadata)return null;if("object"!==typeof this.metadata)throw new Error("Metadata must be an object");var r=Object.entries(this.metadata).length;if(0==r)return null;if(r>50)throw new Error("Only 50 Key/Value pairs are allowed in metadata");return this.metadata},r}(),er=JSON.parse('{"error.authentication_error":"Authentication error, service is unavailable now","error.authorization_error":"Authorization error, service is unavailable now","error.network":"Network Error","error.unknown":"Unexpected error occurred","error.invalid_mobile":"Invalid mobile number","error.invalid_otp":"Invalid verification code","error.invalid_request_error":"Invalid payment request","error.mobile_not_registered":"Mobile number is not registered","error.account_inactive_error":"Merchant account is not active","error.invalid_name":"First and last names are required","error.unsupported_cc_type":"Unsupported card type","error.invalid_cc_number":"Invalid credit card","error.invalid_date":"Invalid date","error.invalid_month":"Invalid month","error.invalid_year":"Invalid year","error.invalid_csc":"Invalid CVC number","error.cant_start_payment":"Error initiating payment, please try again later","error.otp_time_out":"OTP time has finihsed, please try again","error.m070":"Merchant is not allowed to transact in 3Ds","error.m071":"Merchant is not allowed to transact directly without 3Ds","error.m072":"Merchant does not have bank MID specified","error.m074":"Credit card country is not allowed","error.m075":"Merchant account is not subscribed to Moyasar invoices","error.m076":"Merchant account is not allowed to use this payment method","error.m077":"Merchant account cannot use stc pay method","form.cc":"Credit Card","form.code":"Code","form.mobile":"Mobile number","form.otp":"Verification code","form.required":"Required","form.name_on_card":"Name on card","form.last_name":"Last name","form.card_info":"Card information","form.date":"Expiry date","form.csc":"CVC","form.or_pay_with_card":"Or pay with card","form.powered_by":"Powered by","button.pay":"Pay","button.verify":"Verify","button.proceed":"Proceed","button.cancel":"Cancel","validation.is_invalid":"Invalid :attr","validation.can_t_be_blank":":attr is required","validation.should_be_english_letters_only":"Name may only have English alphabet and spaces","validation.first_and_last_name_required":"Both first and last name are required","common.moyasar":"Moyasar","common.test_mode_disclaimer":"Test Mode Enabled: Please do not use in production!","config.error.no_methods":"No payment method available","config.error.no_networks":"No networks configured","config.error.no_amount":"Amount is not configured","config.error.no_currency":"Currency is not configured","config.error.no_country":"Country is not configured","config.error.no_description":"Payment description is not configured","config.error.no_api_key":"API key is not configured","config.error.no_callback_url":"Callback URL is not configured","config.error.no_applepay_label":"Apple Pay label is missing","config.error.no_validate_merchant_url":"Apple Pay validate merchant URL is missing"}'),ur=JSON.parse('{"error.authentication_error":"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u0645\u0635\u0627\u062f\u0642\u0629 \u060c \u062e\u062f\u0645\u0629 \u0627\u0644\u062f\u0641\u0639 \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631\u0629 \u062d\u0627\u0644\u064a\u064b\u0627","error.authorization_error":"\u062e\u0637\u0623 \u0641\u064a \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u060c \u062e\u062f\u0645\u0629 \u0627\u0644\u062f\u0641\u0639 \u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631\u0629 \u062d\u0627\u0644\u064a\u064b\u0627","error.network":"\u062e\u0637\u0623 \u0641\u064a \u0645\u062d\u0627\u0648\u0644\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644","error.unknown":"\u062d\u0635\u0644 \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u0639\u0631\u0648\u0641","error.invalid_mobile":"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.invalid_otp":"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.invalid_request_error":"\u0637\u0644\u0628 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062f\u0641\u0639 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.mobile_not_registered":"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644 \u063a\u064a\u0631 \u0645\u0633\u062c\u0644","error.account_inactive_error":"\u062d\u0633\u0627\u0628 \u0627\u0644\u0628\u0627\u0626\u0639 \u063a\u064a\u0631 \u0641\u0639\u0627\u0644","error.invalid_name":"\u064a\u062c\u0628 \u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644 \u0648\u0627\u0644\u0623\u062e\u064a\u0631","error.unsupported_cc_type":"\u0646\u0648\u0639 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0625\u0626\u062a\u0645\u0627\u0646\u064a\u0629 \u063a\u064a\u0631 \u0645\u062f\u0639\u0648\u0645","error.invalid_cc_number":"\u0631\u0642\u0645 \u0627\u0644\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0625\u0626\u062a\u0645\u0627\u0646\u064a\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.invalid_date":"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u062a\u0647\u0627\u0621 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.invalid_month":"\u0634\u0647\u0631 \u0627\u0644\u0625\u0646\u062a\u0647\u0627\u0621 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.invalid_year":"\u0633\u0646\u0629 \u0627\u0644\u0625\u0646\u062a\u0647\u0627\u0621 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629","error.invalid_csc":"\u0631\u0645\u0632 \u0627\u0644\u0623\u0645\u0627\u0646 \u0644\u0644\u0628\u0637\u0627\u0642\u0629 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d","error.cant_start_payment":"\u062d\u0635\u0644 \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0645\u062d\u0627\u0648\u0644\u0629 \u0628\u062f\u0621 \u0639\u0645\u0644\u064a\u0629 \u0627\u0644\u062f\u0641\u0639 \u060c \u0646\u0631\u062c\u0648\u0627 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629\u064b \u0623\u062e\u0631\u0649","error.otp_time_out":"\u0627\u0644\u0648\u0642\u062a \u0627\u0644\u0645\u0633\u0645\u0648\u062d \u0644\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0646\u062a\u0647\u0649 \u060c \u0646\u0631\u062c\u0648\u0627 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629\u064b \u0623\u062e\u0631\u0649","error.m070":"\u063a\u064a\u0631 \u0645\u0633\u0645\u0648\u0639 \u0644\u0644\u0628\u0627\u0626\u0639 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0645\u064a\u0632\u0629 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062b\u0644\u0627\u062b\u064a 3D Secure","error.m071":"\u064a\u062c\u0628 \u0639\u0644\u0649 \u0627\u0644\u0628\u0627\u0626\u0639 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0645\u064a\u0632\u0629 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u062b\u0644\u0627\u062b\u064a \u0644\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a","error.m072":"\u0644\u0627 \u064a\u0648\u062c\u062f \u0644\u0644\u0628\u0627\u0626\u0639 \u062d\u0633\u0627\u0628 \u0628\u0646\u0643\u064a \u0641\u0639\u0627\u0644","error.m074":"\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0625\u0626\u062a\u0645\u0627\u0646 \u062a\u0645 \u0627\u0635\u062f\u0627\u0631\u0647\u0627 \u0645\u0646 \u0623\u062d\u062f \u0627\u0644\u0628\u0644\u062f\u0627\u0646 \u0627\u0644\u063a\u064a\u0631 \u0645\u0633\u0645\u0648\u062d \u0644\u0647\u0627 \u0628\u0627\u0644\u062f\u0641\u0639 \u0647\u0646\u0627","error.m075":"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0644\u0644\u0628\u0627\u0626\u0639 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u062e\u062f\u0645\u0629 \u0627\u0644\u0641\u0648\u062a\u0631\u0629","error.m076":"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0644\u0644\u0628\u0627\u0626\u0639 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639","error.m077":"\u0644\u0627 \u064a\u0645\u0643\u0646 \u0644\u0644\u0628\u0627\u0626\u0639 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u062e\u062f\u0645\u0629 stc pay \u0644\u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a","form.cc":"\u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0625\u0626\u062a\u0645\u0627\u0646","form.code":"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642","form.mobile":"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644","form.otp":"\u0631\u0645\u0632 \u0627\u0644\u062a\u062d\u0642\u0642","form.required":"\u0645\u0637\u0644\u0648\u0628","form.name_on_card":"\u0627\u0644\u0627\u0633\u0645 \u0639\u0644\u0649 \u0627\u0644\u0628\u0637\u0627\u0642\u0629","form.last_name":"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u062e\u064a\u0631","form.card_info":"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0628\u0637\u0627\u0642\u0629 \u0627\u0644\u0625\u0626\u062a\u0645\u0627\u0646","form.date":"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u062a\u0647\u0627\u0621","form.csc":"\u0631\u0645\u0632 \u0627\u0644\u0623\u0645\u0627\u0646 CVC","form.or_pay_with_card":"\u0623\u0648 \u0627\u062f\u0641\u0639 \u0628\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0628\u0637\u0627\u0642\u062a\u0643 \u0627\u0644\u0625\u0626\u062a\u0645\u0627\u0646\u064a\u0629","form.powered_by":"\u062e\u062f\u0645\u0629 \u0627\u0644\u062f\u0641\u0639 \u0645\u0642\u062f\u0645\u0629 \u0645\u0646 \u0642\u0628\u0644","button.pay":"","button.verify":"\u062a\u062d\u0642\u0642","button.proceed":"\u0627\u062a\u0645\u0627\u0645 \u0627\u0644\u0639\u0645\u0644\u064a\u0629","button.cancel":"\u0625\u0644\u063a\u0627\u0621","validation.is_invalid":"\u0642\u064a\u0645\u0629 :attr \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629","validation.can_t_be_blank":"\u0642\u064a\u0645\u0629 :attr \u0645\u0637\u0644\u0648\u0628\u0629","validation.should_be_english_letters_only":"\u0627\u0644\u0627\u0633\u0645 \u064a\u062c\u0628 \u0623\u0646 \u064a\u062d\u062a\u0648\u064a \u0639\u0644\u0649 \u062d\u0631\u0648\u0641 \u0625\u0646\u062c\u0644\u064a\u0632\u064a\u0629 \u0648 \u0645\u0633\u0627\u0641\u0627\u062a \u0641\u0642\u0637","validation.first_and_last_name_required":"\u0627\u0644\u0623\u0633\u0645 \u0627\u0644\u0623\u0648\u0644 \u0648\u0627\u0644\u0623\u062e\u064a\u0631 \u0645\u0637\u0644\u0648\u0628","common.moyasar":"\u0645\u064a\u0633\u0631","common.test_mode_disclaimer":"\u0648\u0636\u0639 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u062a\u062c\u0631\u064a\u0628\u064a \u060c \u0627\u0644\u0631\u062c\u0627\u0621 \u0639\u062f\u0645 \u0627\u0633\u062a\u062e\u062f\u0627\u0645\u0647 \u0627\u0644\u0628\u064a\u0626\u0629 \u0627\u0644\u062a\u0634\u063a\u064a\u0644\u064a\u0629!","config.error.no_methods":"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u064a \u0648\u0633\u064a\u0644\u0629 \u062f\u0641\u0639 \u0645\u062a\u0627\u062d\u0629","config.error.no_networks":"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0639\u062f\u0627\u062f \u0634\u0628\u0643\u0627\u062a \u0627\u0644\u062f\u0641\u0639 \u0628\u0634\u0643\u0644 \u0635\u062d\u064a\u062d"}'),sr=function(){function r(){this.Or=!1,this.language={en:er,ar:ur}}return r.prototype.jr=function(){return"en"},r.prototype.q=function(r,n,t){void 0===n&&(n={}),void 0===t&&(t=null),r=r.replace(/\s+/g,"_").replace(/[^0-9a-zA-Z\.]/g,"_").toLowerCase(),this.Or||this.Pr(),t||(t=wr.V());var i=this.jr(),o=null;if(t&&this.language[t]&&this.language[t][r]?o=this.language[t][r]:this.language[i]&&this.language[i][r]&&(o=this.language[i][r]),null!==o){for(var e in n)o=o.replace(new RegExp("/:"+e+"/g"),n[e]);return o}return r},r.prototype.Pr=function(){var r=wr.K();if(r){for(var n in r)if(2==n.length&&"object"===typeof r[n]){var t=this.language[n]||{};this.language[n]=Object.assign(t,r[n])}this.Or=!0}},r}(),cr=function(){function r(){this.listeners={}}return r.prototype.addEventListener=function(r,n){r in this.listeners||(this.listeners[r]=[]),this.listeners[r].push(n)},r.prototype.removeEventListener=function(r,n){if(r in this.listeners)for(var t=this.listeners[r],i=0,o=t.length;i<o;i++)if(t[i]===n)return void t.splice(i,1)},r.prototype.dispatchEvent=function(r){if(!(r.type in this.listeners))return!0;for(var n=this.listeners[r.type].slice(),t=0,i=n.length;t<i;t++)n[t].call(this,r);return!r.defaultPrevented},r}();try{new window.EventTarget}catch(k){window.EventTarget=cr}var lr=function(){function r(){this.kr=this.Ir()}return r.prototype.Ar=function(r,n){this.kr.addEventListener(r,n)},r.prototype.Cr=function(r,n){this.kr.dispatchEvent(this.Er(r,{detail:n}))},r.prototype.Er=function(r,n){if("function"===typeof window.CustomEvent)return new CustomEvent(r,n);n=n||{bubbles:!1,cancelable:!1,detail:null};var t=document.createEvent("CustomEvent");return t.initCustomEvent(r,n.bubbles,n.cancelable,n.detail),t},r.prototype.Sr=function(r,n){this.kr.removeEventListener(r,n)},r.prototype.Mr=function(){this.kr=this.Ir()},r.prototype.Ir=function(){var r=new EventTarget;return r.addEventListener=r.addEventListener||function(n,t,i){return r.attachEvent(n,t,i)},r.dispatchEvent=r.dispatchEvent||function(n){return r.fireEvent(n)},r},r}(),ar=function(){this.type="",this.message=null},fr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),mr=function(r){function n(){var n=null!==r&&r.apply(this,arguments)||this;return n.type="applepay",n.company="",n.name=null,n.number=null,n}return fr(n,r),n}(ar),dr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),hr=function(r){function n(){var n=null!==r&&r.apply(this,arguments)||this;return n.type="creditcard",n.company="",n.name=null,n.number=null,n.transaction_url="",n}return dr(n,r),n}(ar),pr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),_r=function(r){function n(){var n=null!==r&&r.apply(this,arguments)||this;return n.type="stcpay",n.mobile="",n.reference_number="",n.branch="",n.cashier="",n.transaction_url="",n}return pr(n,r),n}(ar),yr=function(){function r(){}return r.Rr=function(n){if("undefined"===typeof n.type)return null;var t=r.Fr(n.type);if(null===t)return null;for(var i in n)i in t&&(t[i]=n[i]);return t},r.Fr=function(r){switch(r){case"creditcard":return new hr;case"applepay":return new mr;case"stcpay":return new _r}return null},r}(),vr=function(){function r(){this.id="",this.status="initiated",this.amount=0,this.fee=0,this.currency="",this.refunded=0,this.refunded_at=null,this.captured=0,this.captured_at=null,this.voided_at=null,this.description="",this.amount_format="",this.fee_format="",this.refunded_format="",this.captured_format="",this.invoice_id=null,this.ip=null,this.callback_url=null,this.created_at="",this.updated_at="",this.source=null}return r.Rr=function(n){var t=new r;for(var i in n)i in t&&("source"==i&&(t.source=yr.Rr(n[i])),t[i]=n[i]);return t},r.prototype.isPaid=function(){return"paid"==this.status},r.prototype.isFailed=function(){return"failed"==this.status},r.prototype.isInitiated=function(){return"initiated"==this.status},r.prototype.isRefunded=function(){return"refunded"==this.status},r.prototype.isVoided=function(){return"voided"==this.status},r.prototype.isCreditCard=function(){var r;return"creditcard"==(null===(r=this.source)||void 0===r?void 0:r.type)},r.prototype.isStcPay=function(){var r;return"stcpay"==(null===(r=this.source)||void 0===r?void 0:r.type)},r.prototype.isApplePay=function(){var r;return"applepay"==(null===(r=this.source)||void 0===r?void 0:r.type)},r}(),br=function(){function r(){}return r.prototype.Tr=function(r){return wr.W()+"/"+r},r.prototype.qr=function(){return this.Tr("v1/payments")},r.prototype.Lr=function(){return wr.Z()},r.prototype.Dr=function(){return"v1.5.0"},r.prototype.Br=function(){var r=wr.ur();if(null===r)return Promise.resolve();if("function"!==typeof r)throw new Error("Invalid handler "+r);var n=r(),t=null;if("boolean"===typeof n)t=n?Promise.resolve({}):Promise.reject();else if(n instanceof Promise)t=n;else{if("object"!==typeof n)throw new Error("Invalid handler result "+n);t=Promise.resolve(n)}return t.then((function(r){return"object"===typeof r?r:"boolean"===typeof r&&r?Promise.resolve({}):Promise.reject("Invalid handler result "+r)})).then((function(r){return wr.N(r)}))},r.prototype.Nr=function(r){var n=wr.sr();if(null===n)return Promise.resolve(r);if("function"===typeof n){var t=n(r);return"boolean"===typeof t?t?Promise.resolve(r):Promise.reject("Canceled"):t instanceof Promise?t.then((function(){return r})):Promise.resolve(r)}if("string"!==typeof n)throw new Error("Invalid handler "+n);return fetch(n,{method:"post",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Moyasar-Form-Version":this.Dr()},body:JSON.stringify(r)}).then((function(n){return 201==n.status?r:(console.log("Could not save payment, expected 201 and got "+n.status),Promise.reject("Could not save payment, please contact support"))}))},r.prototype.Hr=function(r){var n=this,t={amount:wr.X(),currency:wr.nr(),description:wr.ir(),publishable_api_key:this.Lr()},i=wr.gr();return i&&Object.keys(i).length>0&&(t.metadata=i),fetch(this.qr(),{method:"post",headers:{"Content-Type":"application/json","X-Moyasar-Form-Version":this.Dr()},body:JSON.stringify(Object.assign(t,r))}).then((function(r){return r.ok?r.json():Promise.reject(r)})).then((function(r){return vr.Rr(r)})).then((function(r){return n.Nr(r)}))},r.prototype.Gr=function(r){return this.Hr({callback_url:wr.er(),source:Object.assign({type:"creditcard"},r)})},r.prototype.$r=function(r){return this.Hr({source:{type:"stcpay",mobile:r}})},r.prototype.Vr=function(r,n){return fetch(r,{method:"post",headers:{"Content-Type":"application/json","X-Moyasar-Form-Version":this.Dr()},body:JSON.stringify({otp_value:n})}).then((function(r){return r.ok?r.json():Promise.reject(r)})).then((function(r){return vr.Rr(r)}))},r.prototype.Kr=function(r){return this.Hr({source:{type:"applepay",token:JSON.stringify(r)}})},r.prototype.Ur=function(r){var n,t,i=wr.er(),o="?";i.indexOf("?")>-1&&(o="&"),i=""+i+o+"id="+r.id+"&status="+r.status+"&message="+(null===(n=r.source)||void 0===n?void 0:n.message),"initiated"==r.status&&"creditcard"==(null===(t=r.source)||void 0===t?void 0:t.type)&&(i=r.source.transaction_url);var e=wr.lr();"function"===typeof e?e(i):window.location.href=i},r.prototype.Wr=function(r){return/^M\d+:/.test(r.message||"")?nr("error."+r.message.split(":")[0].trim().toLowerCase()):nr("error."+r.type)},r.prototype.Zr=function(r,n,t){var i;return void 0===t&&(t=null),r.errors&&r.errors[n]?r.errors[n]instanceof Array?r.errors[n].map((function(r){return nr("validation."+r,t?{attr:t}:{})})).join(", "):null===(i=r.errors[n])||void 0===i?void 0:i.toString():null},r.prototype.Yr=function(r){var n=wr.cr();if("function"===typeof n)try{n(r)}catch(k){console.error("An error happended when firing failure callback"),console.error(r)}},r}(),wr=new or,gr=new sr,Or=new lr,jr=function(){return new br},Pr="mysr-form-bringToLife",kr="mysr-form-scaleDown9",Ir=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ar=function(){return(Ar=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},Cr=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Ir(n,r),n.prototype.render=function(){var r=this.props,n=r.class,t=r.busy,i=r.success,o=r.fail,e=function(r,n){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(r);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]])}return t}(r,["class","busy","success","fail"]),u=Q(n);u.unshift("mysr-form-button"),o?u.push("mysr-form-fail"):i?u.push("mysr-form-success"):t&&u.push("mysr-form-busy");var s=null;i?s=E("path",{class:rr([Pr,kr]),d:"M-30 3 l18 18 l38 -38",stroke:"white","stroke-width":"7",fill:"none"}):o&&(s=E("g",{class:rr([Pr,kr])},E("path",{d:"M-20 -20 l40 40",stroke:"white","stroke-width":"7",fill:"none"}),E("path",{d:"M20 -20 l-40 40",stroke:"white","stroke-width":"7",fill:"none"})));var c=null;return(t||i||o)&&(c=E("svg",{class:"mysr-form-indicator",viewBox:"-50 -50 100 100"},E("circle",{class:rr(["mysr-form-circle",!t||i||o?Pr:"mysr-form-circleAnimate"]),r:"45",stroke:"white","stroke-width":"7",fill:"transparent"}),s)),E("button",Ar({class:rr(u)},e),c||this.props.children||null)},n}(M),Er=function(){function r(){this.zr=[{Jr:"amex",Xr:function(){return/^3[47]/},Qr:function(){return/^3[47][0-9]{13}$/},rn:"0000 000000 00000",nn:"0000"},{Jr:"mada",Xr:function(){return new RegExp("^(4((0((0(86[1]))|(1(75[7]))|(7((19[7])|(39[5])))|(9(20[1]))))|(1((0(68[5]))|(7(63[3]))|(9(59[3]))))|(2((2(81[789]))|(8((33[1])|(67[123])))))|(3((1(36[1]))|(2(32[8]))|(4(10[7]))|(9(95[46]))))|(4((0((53[3])|(64[7])|(79[5])))|(5(56[4]))|(6((39[3])|(40[4])|(67[2])))))|(5((5((03[6])|(70[8])))|(7(86[5]))|(8(45[6]))))|(6((2(22[0]))|(8(54[0123]))))|(8((3(01[012]))|(4(78[3]))|(6(09[456]))|(9(31[789]))))|(9(3(42[8])))))|(5((0((4(30[0]))|(8(16[0]))))|(1(3(21[3])))|(2((0(05[8]))|(1(07[6]))|(4((13[0])|(51[4])))|(9((41[5])|(74[1])))))|(3((0((06[0])|(90[6])))|(1((09[5])|(19[6])))|(2(01[3]))|(5((82[5])|(98[9])))|(6(02[3]))|(7(76[7]))|(9(93[1]))))|(4((3((08[5])|(35[7])))|(9(76[0]))))|(5((4(18[0]))|(7(60[6]))|(8(84[8]))))|(8((5(26[5]))|(8((8(4[56789]|5[01]))|(98[23])))|(9((00[5])|(20[6])))))))|(6((0((4(90[6]))|(5(14[1]))))|(3(6(12[0])))))|(9(6(8(2(0[123456789]|1[01])))))")},Qr:function(){return new RegExp("^(4((0((0(86[1]))|(1(75[7]))|(7((19[7])|(39[5])))|(9(20[1]))))|(1((0(68[5]))|(7(63[3]))|(9(59[3]))))|(2((2(81[789]))|(8((33[1])|(67[123])))))|(3((1(36[1]))|(2(32[8]))|(4(10[7]))|(9(95[46]))))|(4((0((53[3])|(64[7])|(79[5])))|(5(56[4]))|(6((39[3])|(40[4])|(67[2])))))|(5((5((03[6])|(70[8])))|(7(86[5]))|(8(45[6]))))|(6((2(22[0]))|(8(54[0123]))))|(8((3(01[012]))|(4(78[3]))|(6(09[456]))|(9(31[789]))))|(9(3(42[8])))))|(5((0((4(30[0]))|(8(16[0]))))|(1(3(21[3])))|(2((0(05[8]))|(1(07[6]))|(4((13[0])|(51[4])))|(9((41[5])|(74[1])))))|(3((0((06[0])|(90[6])))|(1((09[5])|(19[6])))|(2(01[3]))|(5((82[5])|(98[9])))|(6(02[3]))|(7(76[7]))|(9(93[1]))))|(4((3((08[5])|(35[7])))|(9(76[0]))))|(5((4(18[0]))|(7(60[6]))|(8(84[8]))))|(8((5(26[5]))|(8((8(4[56789]|5[01]))|(98[23])))|(9((00[5])|(20[6])))))))|(6((0((4(90[6]))|(5(14[1]))))|(3(6(12[0])))))|(9(6(8(2(0[123456789]|1[01])))))\\'d{10}$")},rn:"0000 0000 0000 0000",nn:"000"},{Jr:"visa",Xr:function(){return/^4/},Qr:function(){return/^4[0-9]{12}(?:[0-9]{3})?$/},rn:"0000 0000 0000 0000",nn:"000"},{Jr:"mastercard",Xr:function(){return/^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)/},Qr:function(){return/^(?:5[1-5][0-9]{2}|222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}$/},rn:"0000 0000 0000 0000",nn:"000"}]}return r.prototype.tn=function(r){for(var n=0,t=this.zr;n<t.length;n++){var i=t[n];if(i.Xr().test(r))return i}return null},r.prototype.on=function(r){for(var n=0,t=this.zr;n<t.length;n++){var i=t[n];if(i.Jr==r)return i}return null},r}(),Sr=function(){function r(){this.un=[]}return r.prototype.sn=function(r){for(var n=r.split(""),t=[],i=0;i<n.length;++i){var o=n[i];if("\\"!=o)"0"!=o?"a"!=o?"A"!=o?t.push({cn:"char",u:o}):t.push({cn:"ph",u:"alphanum",ln:function(r){return/^[A-Za-z0-9]$/.test(r)}}):t.push({cn:"ph",u:"alpha",ln:function(r){return/^[A-Za-z]$/.test(r)}}):t.push({cn:"ph",u:"digit",ln:function(r){return/^[0-9]$/.test(r)}});else{if(i+1>=n.length||" "==n[i+1])throw new Error("Invalid escape sequence");t.push({cn:"char",u:n[++i]})}}this.un=t},r.prototype.an=function(r,n){if(void 0===n&&(n=""),!this.un)return r;var t=r.length==n.length?0:r.length<n.length?-1:1;if(0==t&&r==n)return r;0==t&&r!=n&&(t=1,n="");for(var i=r.split(""),o=t>0?0:i.length-1;(t>0?o<this.un.length:o>=0)&&!(t>0?o>=i.length:o<0);){var e=this.un[o];if("char"==e.cn&&i[o]!=e.u){for(var u=!1,s=o;t>0?s<this.un.length:s>=0;s+=t){var c=this.un[s];if("ph"==c.cn){for(var l=i.slice(0,o),a=i.slice(o);a.length>0&&c.ln&&!c.ln(a[0]);)a.shift();for(var f=o;t>0?f<s:f>s;f+=t){var m=this.un[f];if("ph"==m.cn)break;if(t>0&&"char"==m.cn&&(l.push(m.u),o=f),t<0&&"char"==m.cn){if(i[f]!=m.u)break;l.pop(),o=f}}i=l.concat(a),u=!0;break}}if(u){o+=t;continue}}if("char"==e.cn&&i[o]!=e.u){i=i.slice(0,o);break}if("ph"==e.cn&&e.ln&&!e.ln(i[o])){i=i.slice(0,o);break}o+=t}return o==this.un.length&&o<i.length&&(i=i.slice(0,this.un.length)),i.join("")},r}(),xr={"form-el":"mysr-form-form-el",moyasarForm:"mysr-form-moyasarForm",moyasarFormWrapper:"mysr-form-moyasarFormWrapper",method:"mysr-form-method",methodButtons:"mysr-form-methodButtons",methodButton:"mysr-form-methodButton",footer:"mysr-form-footer",configNotice:"mysr-form-configNotice",noticeItem:"mysr-form-noticeItem",divider:"mysr-form-divider",dividerLine:"mysr-form-dividerLine",dividerParagraph:"mysr-form-dividerParagraph",fixedWidth:"mysr-form-fixedWidth",button:"mysr-form-button",indicator:"mysr-form-indicator",circle:"mysr-form-circle",circleAnimate:"mysr-form-circleAnimate","mysr-busy-circle-rotate":"mysr-form-mysr-busy-circle-rotate",bringToLife:"mysr-form-bringToLife","mysr-live":"mysr-form-mysr-live",scaleDown9:"mysr-form-scaleDown9",busy:"mysr-form-busy",success:"mysr-form-success",fail:"mysr-form-fail",input:"mysr-form-input",inputError:"mysr-form-inputError",centeredInput:"mysr-form-centeredInput",label:"mysr-form-label",labelGroup:"mysr-form-labelGroup",mysrFieldset:"mysr-form-mysrFieldset",topLeftRadius0:"mysr-form-topLeftRadius0",topRightRadius0:"mysr-form-topRightRadius0",bottomLeftRadius0:"mysr-form-bottomLeftRadius0",bottomRightRadius0:"mysr-form-bottomRightRadius0",cardInfo:"mysr-form-cardInfo",cardInfoElement:"mysr-form-cardInfoElement",cardInfoHalfWidth:"mysr-form-cardInfoHalfWidth",inputGroup:"mysr-form-inputGroup",submitGroup:"mysr-form-submitGroup",formError:"mysr-form-formError",inputAlert:"mysr-form-inputAlert",alertDanger:"mysr-form-alertDanger",inputAlertHidden:"mysr-form-inputAlertHidden",requiredAlert:"mysr-form-requiredAlert",requiredAlertHidden:"mysr-form-requiredAlertHidden",alertContainer:"mysr-form-alertContainer",ccInputGroup:"mysr-form-ccInputGroup",ccIconsGroup:"mysr-form-ccIconsGroup",ccIcon:"mysr-form-ccIcon",ccIconHidden:"mysr-form-ccIconHidden",ccIconDisabled:"mysr-form-ccIconDisabled",ccIconAmex:"mysr-form-ccIconAmex",ccIconMada:"mysr-form-ccIconMada",ccIconVisa:"mysr-form-ccIconVisa",ccIconMastercard:"mysr-form-ccIconMastercard",applePayButton:"mysr-form-applePayButton",stcPayButton:"mysr-form-stcPayButton",stcPayLogo:"mysr-form-stcPayLogo",stcPayLogoLight:"mysr-form-stcPayLogoLight",forceLtr:"mysr-form-forceLtr",stcPayModal:"mysr-form-stcPayModal","mysr-stcpay-modal-slide-in":"mysr-form-mysr-stcpay-modal-slide-in",stcPayModalHead:"mysr-form-stcPayModalHead",headLogo:"mysr-form-headLogo",headCloseButton:"mysr-form-headCloseButton",stcPayModalBody:"mysr-form-stcPayModalBody",stcPayInput:"mysr-form-stcPayInput",stcPayFormError:"mysr-form-stcPayFormError",stcPayModalShowing:"mysr-form-stcPayModalShowing",stcPayModalHiding:"mysr-form-stcPayModalHiding","mysr-stcpay-modal-slide-out":"mysr-form-mysr-stcpay-modal-slide-out",stcPayOverlay:"mysr-form-stcPayOverlay",stcPayOverlayShowing:"mysr-form-stcPayOverlayShowing","mysr-fading-in-overlay":"mysr-form-mysr-fading-in-overlay",stcPayOverlayHiding:"mysr-form-stcPayOverlayHiding","mysr-fading-out-overlay":"mysr-form-mysr-fading-out-overlay",stcPayCompactForm:"mysr-form-stcPayCompactForm",compactButton:"mysr-form-compactButton",compactButtonSlideAside:"mysr-form-compactButtonSlideAside","compact-btn-slide-aside-ltr":"mysr-form-compact-btn-slide-aside-ltr",compactButtonSlideOut:"mysr-form-compactButtonSlideOut","compact-btn-slide-back-ltr":"mysr-form-compact-btn-slide-back-ltr",compactInput:"mysr-form-compactInput",stillCompactInput:"mysr-form-stillCompactInput",compactInputSlideIn:"mysr-form-compactInputSlideIn","compact-input-slide-in-ltr":"mysr-form-compact-input-slide-in-ltr",compactInputSlideOut:"mysr-form-compactInputSlideOut","compact-input-slide-out-ltr":"mysr-form-compact-input-slide-out-ltr",compactContainer:"mysr-form-compactContainer",stillCompactContainer:"mysr-form-stillCompactContainer",compactContainerSlideIn:"mysr-form-compactContainerSlideIn","compact-container-slide-in":"mysr-form-compact-container-slide-in",compactContainerSlideOut:"mysr-form-compactContainerSlideOut","compact-container-slide-out":"mysr-form-compact-container-slide-out","compact-btn-slide-aside-rtl":"mysr-form-compact-btn-slide-aside-rtl","compact-btn-slide-back-rtl":"mysr-form-compact-btn-slide-back-rtl","compact-input-slide-in-rtl":"mysr-form-compact-input-slide-in-rtl","compact-input-slide-out-rtl":"mysr-form-compact-input-slide-out-rtl"},Mr={input:"mysr-form-input",inputError:"mysr-form-inputError",centeredInput:"mysr-form-centeredInput",label:"mysr-form-label",labelGroup:"mysr-form-labelGroup",mysrFieldset:"mysr-form-mysrFieldset",topLeftRadius0:"mysr-form-topLeftRadius0",topRightRadius0:"mysr-form-topRightRadius0",bottomLeftRadius0:"mysr-form-bottomLeftRadius0",bottomRightRadius0:"mysr-form-bottomRightRadius0",cardInfo:"mysr-form-cardInfo",cardInfoElement:"mysr-form-cardInfoElement",cardInfoHalfWidth:"mysr-form-cardInfoHalfWidth",inputGroup:"mysr-form-inputGroup",submitGroup:"mysr-form-submitGroup",formError:"mysr-form-formError",inputAlert:"mysr-form-inputAlert",alertDanger:"mysr-form-alertDanger",inputAlertHidden:"mysr-form-inputAlertHidden",requiredAlert:"mysr-form-requiredAlert",requiredAlertHidden:"mysr-form-requiredAlertHidden",alertContainer:"mysr-form-alertContainer"},Rr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fr=function(){return(Fr=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},Tr=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Rr(n,r),n.prototype.render=function(){var r=this.props,n=(r.class,r.name),t=r.label,i=r.error,o=r.requiredError,e=r.innerRef,u=function(r,n){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(r);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]])}return t}(r,["class","name","label","error","requiredError","innerRef"]);return E("div",{class:Mr.inputGroup},E("div",{class:Mr.labelGroup},E("label",{class:Mr.label,for:n},t),E("span",{class:rr([Mr.requiredAlert,o?null:Mr.requiredAlertHidden])},nr("form.required"))),E("div",null,E("input",Fr({id:n,class:this.fn(),ref:e},u)),E("div",{class:Mr.alertContainer},E("span",{class:rr([Mr.inputAlert,Mr.alertDanger,i?null:Mr.inputAlertHidden])},i))))},n.prototype.fn=function(){var r=Q(this.props.class||[]);return r.unshift(Mr.input),(this.props.error||this.props.requiredError)&&r.push(Mr.inputError),rr(r)},n}(M),qr=function(){return(qr=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)};function Lr(r){var n=r.Jr,t=r.mn,i=r.dn,o=r.hn,e=r.pn,u=function(r,n){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(r);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]])}return t}(r,["_name","_name_error","_name_required_error","_processing","_locked"]);return E(Tr,qr({name:"mysr-cc-name",label:nr("form.name_on_card"),placeholder:nr("form.name_on_card"),autocomplete:"ccname",error:t,requiredError:i,value:n,disabled:o||e,dir:"ltr"},u))}function Dr(r){var n=r._n,t=r.hn,i=r.pn,o=t||i;function e(r){var t;return rr([xr.ccIcon,xr["ccIcon"+(t=r,t.substring(0,1).toUpperCase()+t.substring(1))],n&&n!=r?xr.ccIconHidden:null,o?xr.ccIconDisabled:null].filter((function(r){return null!=r})))}for(var u={amex:E("span",{class:e("amex")}),mada:E("span",{class:e("mada")}),visa:E("span",{class:e("visa")}),mastercard:E("span",{class:e("mastercard")})},s=[],c=0,l=wr.mr();c<l.length;c++){var a=l[c];(a=a.toLowerCase())in u&&s.push(u[a])}return E(x,null,s)}var Br,Nr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Hr=function(){return(Hr=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},Gr=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Nr(n,r),n.prototype.yn=function(){var r=this.props,n=r.vn,t=r.bn,i=r.wn;return n||t||i},n.prototype.render=function(){var r=this.props,n=r.hn,t=r.pn,i=r.gn,o=r.On,e=r.jn,u=r.Pn,s=r.kn,c=r.vn,l=r.In,a=r.bn,f=r.An,m=r.wn,d=this.props.method,h=[u,s,l,f].filter((function(r){return r}));return E("div",{class:xr.inputGroup},E("div",{class:xr.labelGroup},E("label",{class:xr.label,for:"mysr-cc-number"},nr("form.card_info")),E("span",{class:rr([xr.requiredAlert,this.yn()?null:xr.requiredAlertHidden])},nr("form.required"))),E("div",{class:xr.cardInfo},E("div",{class:rr([xr.cardInfoElement,xr.ccInputGroup,xr.cardInfo]),dir:"ltr"},E("input",{id:"mysr-cc-number",type:"text",class:rr([xr.input,xr.bottomLeftRadius0,xr.bottomRightRadius0,s||c?xr.inputError:null]),placeholder:"1234 5678 9101 1121",autocomplete:"cc-number",onInput:function(r){return d.Cn(r)},onBlur:function(r){return d.En()},onFocus:function(r){return d.Sn()},value:i,disabled:n||t}),E("div",{class:xr.ccIconsGroup},E(Dr,Hr({},d.state)))),E("div",{class:rr([xr.cardInfoElement,xr.ccInputGroup,xr.cardInfo]),dir:"ltr"},E("input",{class:rr([xr.input,xr.cardInfoElement,xr.cardInfoHalfWidth,xr.topLeftRadius0,xr.topRightRadius0,xr.bottomRightRadius0,l||a?xr.inputError:null]),type:"text",placeholder:"MM / YY",autocomplete:"cc-exp",onInput:function(r){return d.xn(r)},onBlur:function(r){return d.Mn()},onFocus:function(r){return d.Rn()},value:o,disabled:n||t}),E("input",{class:rr([xr.input,xr.cardInfoElement,xr.cardInfoHalfWidth,xr.topLeftRadius0,xr.topRightRadius0,xr.bottomLeftRadius0,f||m?xr.inputError:null]),type:"text",placeholder:"CVC",autocomplete:"cc-csc",onInput:function(r){return d.Fn(r)},onBlur:function(r){return d.Tn()},onFocus:function(r){return d.qn()},value:e,disabled:n||t})),E("div",{class:xr.alertContainer},h.map((function(r){return E("span",{class:rr([xr.inputAlert,xr.alertDanger])},r)})))))},n}(M),$r=function(){function r(){}return r.prototype.Ln=function(r){for(var n=parseInt(r.charAt(r.length-1)),t=0;t<r.length-1;t++){var i=parseInt(r.charAt(t));t%2==0&&(i*=2),i>9&&(i-=9),n+=i}return n%10==0},r.prototype.Dn=function(r){return!this.Ln(r)},r}();!function(r){r[r._CreditCard=0]="_CreditCard",r[r._StcPay=1]="_StcPay",r[r._ApplePay=2]="_ApplePay"}(Br||(Br={}));var Vr=Br,Kr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ur=function(){return(Ur=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},Wr=function(r){function n(n){var t=r.call(this,n)||this;return t.state={hn:!1,Bn:!1,Nn:!1,pn:!1,Pn:null,Jr:"",mn:null,dn:!1,gn:"",_n:null,kn:null,vn:!1,On:"",In:null,bn:!1,jn:"",An:null,wn:!1},t.Hn=new Er,t.Gn=new Sr,t.Gn.sn("0000 0000 0000 0000"),t.$n=new Sr,t.$n.sn("00 / 00"),t.nn=new Sr,t.nn.sn("0000"),t.Vn=jr(),t.Kn=new $r,t.Un=t.Un.bind(t),t.Wn=t.Wn.bind(t),t.Zn=t.Zn.bind(t),t.Cn=t.Cn.bind(t),t.xn=t.xn.bind(t),t.Fn=t.Fn.bind(t),t.En=t.En.bind(t),t.Mn=t.Mn.bind(t),t.Tn=t.Tn.bind(t),t.Sn=t.Sn.bind(t),t.Rn=t.Rn.bind(t),t.qn=t.qn.bind(t),t}return Kr(n,r),n.prototype.componentDidMount=function(){Or.Ar("form_locked",this.Un)},n.prototype.componentWillUnmount=function(){Or.Sr("form_locked",this.Un)},n.prototype.Un=function(r){var n=!1;null!==r.detail.Yn&&r.detail.Yn!==Vr._CreditCard&&(n=!0),this.setState({pn:n}),n&&this.zn()},n.prototype.Jn=function(){Or.Cr("form_locked",{Yn:Vr._CreditCard})},n.prototype.Xn=function(){Or.Cr("form_locked",{Yn:null})},n.prototype.Wn=function(r){var n=this;if(r.preventDefault(),this.state.hn)return!1;if(this.zn(),![this.Qn(),this.rt()].every(Boolean))return!1;this.setState({hn:!0,Bn:!1,Nn:!1}),this.Jn();var t=this.state.On.split("/"),i=t[0],o=t[1],e={name:this.state.Jr,number:this.state.gn.replace(/\s/g,""),month:i.trim(),year:null===o||void 0===o?void 0:o.trim(),cvc:this.state.jn};return this.Vn.Br().then((function(){return n.Vn.Gr(e)})).then((function(r){if(!r.isInitiated()&&!r.isPaid())return Promise.reject(r);n.Vn.Ur(r)})).catch((function(r){return n.nt(r)})),!1},n.prototype.tt=function(r){this.setState({hn:!1,Pn:r}),this.Vn.Yr(r),this.Xn()},n.prototype.nt=function(r){var n,t=this;this.setState({Nn:!0}),setTimeout((function(){return t.setState({Nn:!1})}),3e3),r instanceof Response&&/4\d\d/.test(r.status.toString())?r.json().then((function(r){return t.it(r)})):r instanceof vr?this.tt((null===(n=r.source)||void 0===n?void 0:n.message)||"Could not get error"):null===r||"string"===typeof r?this.tt(r):(this.tt(nr("error.network")),console.log(r))},n.prototype.it=function(r){var n=r.errors?null:this.Vn.Wr(r),t=this.Vn.Zr(r,"number",nr("form.cc")),i=this.Vn.Zr(r,"cvc",nr("form.csc")),o=this.Vn.Zr(r,"month",nr("form.date"))||this.Vn.Zr(r,"year",nr("form.date")),e=this.Vn.Zr(r,"last_name",nr("form.last_name"))||this.Vn.Zr(r,"name",nr("form.name_on_card"));this.setState({hn:!1,Pn:n,mn:e,kn:t,In:o,An:i}),this.Vn.Yr(n||t||i||o||e||nr("error.unknown")),this.Xn()},n.prototype.Qn=function(){var r=this.state.Jr,n={mn:null,dn:!1};return 0==r.trim().length?n.dn=!0:/^[a-zA-Z\-\s]+$/.test(r)?/^[a-zA-Z\-]+\s+?([a-zA-Z\-]+\s?)+$/.test(r)||(n.mn=nr("validation.first_and_last_name_required")):n.mn=nr("validation.should_be_english_letters_only"),this.setState(n),!n.mn&&!n.dn},n.prototype.En=function(){var r,n=this.state.gn;n=n.replace(/\s/g,"");var t=this.Hn.tn(n);t&&!wr.dr(t.Jr)&&(t=null);var i=null!==(r=null===t||void 0===t?void 0:t.Qr())&&void 0!==r?r:null,o={kn:null,vn:!1};return 0==n.trim().length?o.vn=!0:t?(i&&!i.test(n)||this.Kn.Dn(n))&&(o.kn=nr("error.invalid_cc_number")):o.kn=nr("error.unsupported_cc_type"),this.setState(o),!o.cc_error&&!o.vn},n.prototype.ot=function(){return parseInt((new Date).getFullYear().toString().substring(2))},n.prototype.Mn=function(){var r=this.state.On,n={In:null,bn:!1};if(0==r.trim().length)n.bn=!0;else if(/^\d{2} ?\/ ?\d{2}$/.test(r)){var t=r.split("/"),i=t[0],o=t[1],e=parseInt(i.trim()),u=parseInt(o.trim());e<1||e>12?n.In=nr("error.invalid_month"):(u<this.ot()||u>99)&&(n.In=nr("error.invalid_year"))}else n.In=nr("error.invalid_date");return this.setState(n),!n.In&&!n.bn},n.prototype.Tn=function(){var r=this.state,n=r.jn,t=r._n,i={An:null,wn:!1};return 0==n.trim().length?i.wn=!0:("amex"!=t||/^\d{4}$/.test(n))&&("amex"==t||/^\d{3}$/.test(n))||(i.An=nr("error.invalid_csc")),this.setState(i),!i.An&&!i.wn},n.prototype.rt=function(){return[this.En(),this.Mn(),this.Tn()].every(Boolean)},n.prototype.Zn=function(r){var n;this.setState({mn:null,dn:!1,Jr:null===(n=r.target)||void 0===n?void 0:n.value})},n.prototype.Cn=function(r){var n,t,i,o=X(null===(n=r.target)||void 0===n?void 0:n.value),e=this.Hn.tn(o.replace(/\s/g,""));e&&!wr.dr(e.Jr)&&(e=null),this.Gn.sn(null!==(t=null===e||void 0===e?void 0:e.rn)&&void 0!==t?t:"0000 0000 0000 0000"),this.nn.sn(null!==(i=null===e||void 0===e?void 0:e.nn)&&void 0!==i?i:"0000"),this.setState({kn:null,vn:!1,gn:this.Gn.an(o,this.state.gn),_n:null===e||void 0===e?void 0:e.Jr})},n.prototype.xn=function(r){var n,t=null===(n=r.target)||void 0===n?void 0:n.value;this.setState({In:null,bn:!1,On:this.$n.an(X(t),this.state.On)})},n.prototype.Fn=function(r){var n,t=null===(n=r.target)||void 0===n?void 0:n.value;this.setState({An:null,wn:!1,jn:this.nn.an(X(t),this.state.jn)})},n.prototype.et=function(){this.setState({mn:null,dn:!1})},n.prototype.qn=function(){this.setState({An:null,wn:!1})},n.prototype.Rn=function(){this.setState({In:null,bn:!1})},n.prototype.Sn=function(){this.setState({kn:null,vn:!1})},n.prototype.zn=function(){this.setState({Pn:null,kn:null,vn:!1,In:null,bn:!1,An:null,wn:!1})},n.prototype.render=function(){var r=this,n=this.state,t=n.hn,i=n.pn,o=n.Bn,e=n.Nn,u=new Intl.NumberFormat(wr.V(),{style:"currency",currency:wr.nr(),currencyDisplay:"rtl"==wr.G()?"name":"symbol",minimumFractionDigits:"rtl"==wr.G()?0:void 0}).format(parseFloat(wr.rr())),s="rtl"!=wr.G()?nr("button.pay")+" "+u:u;return E("div",{class:xr.method},E("form",{onSubmit:this.Wn},E(Lr,Ur({},this.state,{onInput:function(n){return r.Zn(n)},onBlur:function(n){return r.Qn()},onFocus:function(n){return r.et()}})),E(Gr,Ur({method:this},this.state)),E(Cr,{busy:t,success:o,fail:e,disabled:i},s)))},n}(M),Zr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Yr=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Zr(n,r),n.prototype.render=function(){var r,n=this.props,t=n.hn,i=n.pn,o=n.ut,e=n.st,u=n.ct,s=n.lt,c=n.ft,l=n.dt,a=n.ht,f=n._t,m=n.Bn,d=n.Nn,h=n.Pn,p=n.method;r=E(Tr,a?{name:"mysr-stc-otp",label:nr("form.otp"),class:rr([xr.forceLtr,xr.centeredInput]),type:"text",inputMode:"numeric",autocomplete:"one-time-code",placeholder:nr("form.code"),innerRef:function(r){return p.yt=r},value:e,onInput:function(r){return p.vt(r)},onBlur:function(r){return p.bt()},onFocus:function(r){return p.wt()},error:c,requiredError:l,disabled:t||i}:{name:"mysr-stc-mobile",label:nr("form.mobile"),class:rr([xr.forceLtr,xr.centeredInput]),type:"text",inputMode:"numeric",autocomplete:"tel-national",placeholder:"05x xxx xxxx",innerRef:function(r){return p.gt=r},value:o,onInput:function(r){return p.Ot(r)},onBlur:function(r){return p.jt()},onFocus:function(r){return p.Pt()},error:u,requiredError:s,disabled:t||i});var _=new Intl.NumberFormat(wr.V(),{style:"currency",currency:wr.nr(),currencyDisplay:"rtl"==wr.G()?"name":"symbol",minimumFractionDigits:"rtl"==wr.G()?0:void 0}).format(parseFloat(wr.rr()));return E(x,null,E("div",{class:rr([xr.stcPayModal,f?xr.stcPayModalHiding:xr.stcPayModalShowing])},E("div",{class:xr.stcPayModalHead},E("div",{class:rr([xr.stcPayLogo,xr.headLogo])}),E("a",{class:xr.headCloseButton,onClick:function(r){return p.kt(!0)},disabled:t},nr("button.cancel"))),E("div",{class:xr.stcPayModalBody},E("form",{onSubmit:function(r){return p.Wn(r),!1}},E("div",{class:xr.stcPayInput},r,E("span",{class:rr([xr.inputAlert,xr.alertDanger,xr.stcPayFormError,h?null:xr.inputAlertHidden])},h),E(Cr,{class:xr.stcPayButton,disabled:t||i,busy:t,success:m,fail:d},a?nr("button.pay")+" "+p.It():nr("button.pay")+" "+_))))),E("div",{class:rr([xr.stcPayOverlay,f?xr.stcPayOverlayHiding:xr.stcPayOverlayShowing]),onClick:function(r){return p.kt(!1)}}))},n}(M),zr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jr=function(){return(Jr=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},Xr=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return zr(n,r),n.prototype.At=function(){var r=this.props,n=r.method;r.At||n.At()},n.prototype.Ct=function(r){r.preventDefault(),this.At()},n.prototype.render=function(){var r=this,n=this.props,t=n.hn,i=n.pn,o=n.At;return E("div",{class:xr.methodButton},E(Cr,{onClick:function(n){return r.Ct(n),!1},class:rr([xr.methodButton,xr.stcPayButton]),disabled:t||i,busy:t},E("div",{class:xr.stcPayLogoLight})),o?E(Yr,Jr({},this.props)):null)},n}(M),Qr=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),rn=function(){return(rn=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},nn=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return Qr(n,r),n.prototype.render=function(){var r=this.props,n=r.name,t=(r.class,r.containerClass,r.error,r.requiredError,r.innerRef),i=function(r,n){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&n.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(r);o<i.length;o++)n.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]])}return t}(r,["name","class","containerClass","error","requiredError","innerRef"]);return E("div",{class:this.Et()},E("input",rn({id:n,class:this.fn(),type:"text",ref:t},i)),this.St())},n.prototype.St=function(){var r=this.props,n=r.error,t=r.requiredError;if(!t||!n)return null;if(n instanceof Array&&0==n.length)return null;var i=tr(n||[]).filter((function(r){return r})).map((function(r){return E("span",{class:rr([Mr.inputAlert,Mr.alertDanger])},r)})).toArray();return E("div",{class:Mr.alertContainer},t?E("span",{class:rr([Mr.inputAlert,Mr.alertDanger])},nr("form.required")):null,i)},n.prototype.fn=function(){var r=Q(this.props.class||[]);return r.unshift(Mr.input),(tr(this.props.error).filter((function(r){return r})).any()||this.props.requiredError)&&r.push(Mr.inputError),rr(r)},n.prototype.Et=function(){var r=Q(this.props.containerClass||[]);return r.unshift(Mr.basicInput),rr(r)},n}(M),tn=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),on=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return tn(n,r),n.prototype.render=function(){var r=this.props,n=r.At,t=r._t,i=r.ht,o=r.hn,e=r.pn,u=r.Bn,s=r.Nn,c=r.ct,l=r.lt,a=r.ft,f=r.dt,m=r.Pn,d=r.method,h=[xr.methodButton,xr.stcPayButton];n&&(h.push(xr.compactButton),h.push(xr.compactButtonSlideAside)),t&&h.push(xr.compactButtonSlideOut);var p=new Intl.NumberFormat(wr.V(),{style:"currency",currency:wr.nr(),currencyDisplay:"rtl"==wr.G()?"name":"symbol",minimumFractionDigits:"rtl"==wr.G()?0:void 0}).format(parseFloat(wr.rr())),_=[c,a,m].filter((function(r){return r})).map((function(r){return E("span",{class:rr([xr.inputAlert,xr.alertDanger])},r)})),y=l||f;return E("div",{class:xr.methodButton},E("form",{onSubmit:function(r){return d.Wn(r),!1}},E("div",{class:xr.stcPayCompactForm,dir:wr.G()},this.xt(),E(Cr,{type:"submit",class:rr(h),disabled:o||e,busy:o,success:u,fail:s},n?i?nr("button.pay")+" "+d.It():p:E("div",{class:xr.stcPayLogoLight}))),E("div",{class:xr.alertContainer},y?E("span",{class:rr([xr.inputAlert,xr.alertDanger])},nr("form.required")):null,_)))},n.prototype.xt=function(){var r=this.props,n=r.At,t=r._t,i=r.ht,o=r.hn,e=r.pn,u=r.ut,s=r.st,c=r.ct,l=r.lt,a=r.ft,f=r.dt,m=r.Pn,d=r.method,h=[xr.forceLtr,xr.centeredInput,xr.compactInput],p=[xr.compactContainer];return n&&(h.push(xr.compactInputSlideIn),p.push(xr.compactContainerSlideIn)),t&&(h.push(xr.compactInputSlideOut),p.push(xr.compactContainerSlideOut)),(c||l||a||f||m)&&h.push(xr.inputError),n?E(nn,i?{name:"mysr-stc-otp",label:nr("form.otp"),containerClass:xr.stillCompactContainer,class:rr([xr.forceLtr,xr.certeredInput,xr.compactInput,xr.stillCompactInput]),type:"text",inputMode:"numeric",autocomplete:"one-time-code",placeholder:nr("form.code"),innerRef:function(r){return d.yt=r},value:s,onInput:function(r){return d.vt(r)},onBlur:function(r){return d.bt()},onFocus:function(r){return d.wt()},disabled:o||e}:{name:"mysr-stc-mobile",label:nr("form.mobile"),containerClass:rr(p),class:rr(h),type:"text",inputMode:"numeric",autocomplete:"tel-national",placeholder:"05x xxx xxxx",innerRef:function(r){return d.gt=r},value:u,onInput:function(r){return d.Ot(r)},onBlur:function(r){return d.jt()},onFocus:function(r){return d.Pt()},disabled:o||e}):null},n}(M),en=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),un=function(){return(un=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},sn=function(r){function n(n){var t=r.call(this,n)||this;return t.state={hn:!1,Bn:!1,Nn:!1,pn:!1,ut:"",ct:null,lt:!1,ht:!1,st:"",ft:null,dt:!1,Mt:null,Rt:null,Ft:null,Pn:null,Tt:null,qt:t.qt(),At:!1,_t:!1},t.Lt=new Sr,t.Lt.sn("000 000 0000"),t.Dt=new Sr,t.Dt.sn("00000000"),t.gt=null,t.yt=null,t.Bt=null,t.Nt=null,t.Vn=jr(),t.Un=t.Un.bind(t),t.Wn=t.Wn.bind(t),t.jt=t.jt.bind(t),t.bt=t.bt.bind(t),t.Ot=t.Ot.bind(t),t.vt=t.vt.bind(t),t.Pt=t.Pt.bind(t),t.wt=t.wt.bind(t),t.It=t.It.bind(t),t.At=t.At.bind(t),t.Ht=t.Ht.bind(t),t.kt=t.kt.bind(t),t}return en(n,r),n.prototype.componentDidMount=function(){Or.Ar("form_locked",this.Un)},n.prototype.componentWillUnmount=function(){Or.Sr("form_locked",this.Un)},n.prototype.Un=function(r){var n=!1;null!==r.detail.Yn&&r.detail.Yn!==Vr._StcPay&&(n=!0),this.setState({pn:n})},n.prototype.Jn=function(){Or.Cr("form_locked",{Yn:Vr._StcPay})},n.prototype.Xn=function(){Or.Cr("form_locked",{Yn:null})},n.prototype.Wn=function(r){r.preventDefault();var n=this.state,t=n.hn,i=n.ht;n.At?t||(i?this.Gt():this.Hr()):this.At()},n.prototype.Hr=function(){var r=this;this.jt()&&(this.setState({hn:!0,Pn:null}),this.Jn(),this.Vn.Br().then((function(){r.Vn.$r(r.state.ut.replace(/\s/g,"")).then((function(r){return r.isInitiated()?r:Promise.reject(r)})).then((function(n){return r.$t(n)})).catch((function(n){return r.nt(n)}))})).catch((function(n){r.setState({hn:!1}),r.Vn.Yr(n),setTimeout((function(){return r.kt(!0,n)}),0)})))},n.prototype.$t=function(r){var n=this;this.setState({hn:!1,Tt:r,ht:!0,Rt:null,Mt:this.Vt()}),setTimeout((function(){return n.Ht()}),100),setTimeout((function(){return n.Kt()}),1e3)},n.prototype.Vt=function(){return(new Date).getTime()},n.prototype.Ut=function(){var r=this.state.Mt;return null===r?null:this.Vt()-r},n.prototype.Kt=function(){var r=this,n=this.Ut();null!=this.state.Tt&&(n&&n>1?(this.setState({}),setTimeout((function(){return r.Kt()}),1e3)):this.Wt(nr("error.otp_time_out")))},n.prototype.Zt=function(){var r=this;setTimeout((function(){return r.setState({Nn:!1,st:"",ht:!1,Ft:null})}),3e3)},n.prototype.It=function(){var r,n=3e5,t=null!==(r=this.Ut())&&void 0!==r?r:n,i=n>t?n-t:0,o=(i=Math.floor(i/1e3))%60;return Math.floor(i/60).toString()+":"+o.toString().padStart(2,"0")},n.prototype.Wt=function(r){this.setState({hn:!1,Pn:r,Nn:!0}),this.Vn.Yr(r),this.Xn()},n.prototype.Gt=function(){var r=this;if(this.bt()){var n=this.state,t=n.Tt,i=n.st;this.setState({hn:!0}),this.Vn.Vr((null===t||void 0===t?void 0:t.source).transaction_url,i).then((function(r){return r.isPaid()?r:Promise.reject(r)})).then((function(n){return r.Yt(n)})).catch((function(n){return r.nt(n)}))}},n.prototype.Yt=function(r){var n=this;this.setState({Bn:!0}),setTimeout((function(){return n.Vn.Ur(r)}),1)},n.prototype.nt=function(r){var n,t=this;this.setState({Nn:!0}),setTimeout((function(){return t.setState({Nn:!1})}),3e3),r instanceof Response&&/4\d\d/.test(r.status.toString())?r.json().then((function(r){return t.it(r)})):r instanceof vr?this.Wt((null===(n=r.source)||void 0===n?void 0:n.message)||nr("error.invalid_otp")):null===r||"string"===typeof r?this.Wt(r):(this.Wt(nr("error.network")),console.log(r))},n.prototype.it=function(r){var n=r.errors?null:this.Vn.Wr(r),t=this.Vn.Zr(r,"mobile",nr("form.mobile")),i=this.Vn.Zr(r,"otp_value",nr("form.otp"));this.setState({hn:!1,Pn:n,ct:t,ft:i}),this.Vn.Yr(n||t||i||nr("error.unknown")),this.Zt(),this.Xn()},n.prototype.Ht=function(){var r,n;null===(r=this.yt)||void 0===r||r.focus(),null===(n=this.gt)||void 0===n||n.focus()},n.prototype.jt=function(){var r=this.state.ut,n=/^05[503649187][0-9]{7}$/.test(r.replace(/\s/g,"")),t=0==r.trim().length;return this.setState({ct:t||n?null:nr("error.invalid_mobile"),lt:t}),n&&!t},n.prototype.bt=function(){var r=/^[0-9]{4,}$/.test(this.state.st),n=0==this.state.st.trim().length;return this.setState({ft:n||r?null:nr("error.invalid_otp"),dt:n}),r&&!n},n.prototype.Ot=function(r){var n,t=this,i=this.state,o=i.ut,e=i.Rt,u=X(null===(n=r.target)||void 0===n?void 0:n.value);this.setState({ct:null,lt:!1,ut:this.Lt.an(u,o),Rt:null===e?r.timeStamp:e}),null!==this.Bt&&clearTimeout(this.Bt),this.Bt=setTimeout((function(){var n=t.state.Rt;n||(n=(new Date).getTime()),"insertFromPaste"==r.inputType||r.timeStamp-n>1&&r.timeStamp-n<300&&t.jt()?t.Wn(r):t.setState({Rt:null})}),400)},n.prototype.vt=function(r){var n,t=this,i=this.state,o=i.st,e=i.Ft,u=X(null===(n=r.target)||void 0===n?void 0:n.value);this.setState({ft:null,dt:!1,st:this.Dt.an(u,o),Ft:null===e?r.timeStamp:e}),null!==this.Nt&&clearTimeout(this.Nt),this.Nt=setTimeout((function(){var n=t.state.Ft;n||(n=(new Date).getTime()),"insertFromPaste"==r.inputType||r.timeStamp-n>1&&r.timeStamp-n<100&&t.bt()?t.Wn(r):t.setState({Ft:null})}),400)},n.prototype.Pt=function(){this.setState({ct:null,lt:!1})},n.prototype.wt=function(){this.setState({ft:null,dt:!1})},n.prototype.At=function(){this.state.At||(this.state.qt&&document.body&&(document.body.style.overflow="hidden"),this.setState({At:!0}),setTimeout(this.Ht,this.state.qt?500:700))},n.prototype.kt=function(r,n){var t=this;void 0===r&&(r=!1),void 0===n&&(n=null);var i=this.state,o=i.hn,e=i.ht,u=i.At,s=i._t;o||!r&&e||!u||s||(this.setState({_t:!0}),setTimeout((function(){t.setState({hn:!1,At:!1,_t:!1,ht:!1,ut:"",st:"",ct:null,ft:null,lt:!1,dt:!1,Tt:null,Rt:null,Ft:null,Mt:null,Pn:n,Nn:!1}),t.state.qt&&document.body&&(document.body.style.overflow=""),t.Xn()}),500))},n.prototype.qt=function(){return window.innerWidth<768},n.prototype.render=function(){return this.state.qt?E(Xr,un({},this.state,{method:this})):E(on,un({},this.state,{method:this}))},n}(M),cn=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ln=function(){return(ln=Object.assign||function(r){for(var n,t=1,i=arguments.length;t<i;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o]);return r}).apply(this,arguments)},an=function(r){function n(n){var t=r.call(this,n)||this;return t.zt=function(r,n){t.Xn();try{r.abort()}catch(i){}t.Vn.Yr(n)},t.state={hn:!1,pn:!1},t.Vn=jr(),t.Un=t.Un.bind(t),t}return cn(n,r),n.Jt=function(){try{return Promise.resolve("undefined"!==typeof window.ApplePaySession&&ApplePaySession.canMakePayments()&&ApplePaySession.supportsVersion(wr.vr()))}catch(k){return Promise.reject(k)}},n.prototype.componentDidMount=function(){Or.Ar("form_locked",this.Un)},n.prototype.componentWillUnmount=function(){Or.Sr("form_locked",this.Un)},n.prototype.Un=function(r){var n=!1;null!==r.detail.Yn&&r.detail.Yn!==Vr._ApplePay&&(n=!0),this.setState({pn:n})},n.prototype.Jn=function(){Or.Cr("form_locked",{Yn:Vr._ApplePay})},n.prototype.Xn=function(){Or.Cr("form_locked",{Yn:null})},n.prototype.render=function(){var r=this;return E("div",{class:xr.methodButton},E(Cr,ln({class:xr.applePayButton,onClick:function(n){return r.Xt(n),!1}},this.props)))},n.prototype.Xt=function(r){var n=this;r.preventDefault(),this.Jn();var t=null;try{t=this.Qt()}catch(r){return this.Xn(),void this.Vn.Yr(r)}t.onvalidatemerchant=function(r){n.Vn.Br().then((function(){return fetch(wr.yr(),{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json","X-Moyasar-Form-Version":"v1.5.0"},body:JSON.stringify({validation_url:r.validationURL})})})).then((function(r){return r.ok?r:Promise.reject(r)})).then((function(r){return r.json()})).then((function(r){return t.completeMerchantValidation(r)})).catch((function(r){return n.zt(t,r)}))},t.onpaymentauthorized=function(r){n.Vn.Kr(r.payment.token).then((function(r){return r.isPaid()?r:Promise.reject(r)})).then((function(r){return n.ri(t,r)})).catch((function(r){return n.ni(t,r)}))},t.oncancel=function(r){var i;r instanceof Error&&console.log(r);var o=null;switch(null===(i=null===r||void 0===r?void 0:r.sessionError)||void 0===i?void 0:i.code){case"unknown":o=nr("error.unknown")}n.zt(t,o)},t.begin()},n.prototype.Qt=function(){return new ApplePaySession(wr.vr(),{countryCode:wr.tr(),currencyCode:wr.nr(),supportedNetworks:wr.hr(),merchantCapabilities:wr.pr(),supportedCountries:wr.br(),total:{label:wr._r(),amount:wr.rr()}})},n.prototype.ri=function(r,n){var t=this;this.Xn(),r.completePayment({status:ApplePaySession.STATUS_SUCCESS}),setTimeout((function(){return t.Vn.Ur(n)}),1500)},n.prototype.ni=function(r,n){var t;this.Xn(),r.completePayment({status:ApplePaySession.STATUS_FAILURE,errors:[]});var i="Payment failed.";n instanceof vr&&n.isFailed()?i+=" Error: "+(null===(t=n.source)||void 0===t?void 0:t.message):n instanceof Response?i+=" Error: "+n.statusText:"string"===typeof n&&(i+=" Error: "+n),this.Vn.Yr(i)},n}(M),fn="mysr-form-dividerLine",mn=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),dn=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return mn(n,r),n.prototype.render=function(){var r=wr.Y();return E("div",{class:"mysr-form-footer"},E("a",{href:"https://moyasar.com/?ref=payment-form-v1.5.0",target:"_blank"},nr("form.powered_by")," ",E("strong",null,nr("common.moyasar"))),r?E("span",null,nr("common.test_mode_disclaimer")):null)},n}(M),hn=function(){function r(r){this.ti=r}return r.prototype.ii=function(){for(var r=[],n=0,t=this.oi();n<t.length;n++){e=(e=t[n]).bind(this.ti);try{e()}catch(k){r.push(k.message)}}if(this.ti.wr())for(var i=0,o=this.ei();i<o.length;i++){var e;e=(e=o[i]).bind(this.ti);try{e()}catch(k){r.push(k.message)}}return this.ti.Y()||this.ti.J()||r.push("This web page is not secure, please enable HTTPS or use a testing key."),r},r.prototype.oi=function(){return[this.ti.W,this.ti.Z,this.ti.U,this.ti.mr,this.ti.X,this.ti.rr,this.ti.nr,this.ti.ir,this.ti.er,this.ti.ur,this.ti.sr,this.ti.cr,this.ti.lr,this.ti.gr]},r.prototype.ei=function(){return[this.ti._r,this.ti.yr,this.ti.vr,this.ti.tr,this.ti.br]},r}(),pn=function(){var r=function(n,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])})(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=n}r(n,t),n.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),_n=function(r){function n(n){var t=r.call(this,n)||this;return t.state={ui:!0,si:[]},t}return pn(n,r),n.prototype.componentDidMount=function(){var r=this;Or.Mr(),an.Jt().then((function(n){return r.ci(n)})).catch((function(n){return r.ci(!1)}))},n.prototype.ci=function(r){var n=wr.U();r||(n=tr(n).filter((function(r){return"applepay"!=r})).toArray()),this.setState({ui:!1,si:n})},n.prototype.li=function(r){return tr(this.state.si).has((function(n){return n==r}))},n.prototype.ai=function(){return new hn(wr).ii()},n.prototype.render=function(){var r=this.ai();if(r.length>0)return this.fi(r);if(this.state.ui)return E("div",null,"Loading");var n=this.state.si,t=n.length>1&&tr(n).has((function(r){return"creditcard"==r}));return E(x,null,E("div",{class:"mysr-form-methodButtons"},this.li("applepay")?E(an,null):null,this.li("stcpay")?E(sn,null):null),this.li("creditcard")?E(x,null,t?E("div",{class:"mysr-form-divider"},E("div",{class:fn}),E("p",{class:"mysr-form-dividerParagraph"},nr("form.or_pay_with_card")),E("div",{class:fn})):null,E("div",null,E(Wr,null))):null,E(dn,null))},n.prototype.fi=function(r){return E(x,null,E("div",{class:"mysr-form-configNotice"},r.map((function(r){return E("span",{class:"mysr-form-noticeItem"},r)}))),E(dn,null))},n.init=function(r){if("object"!==typeof r)throw new Error("Configurations must be an object");wr.B(r);var t=wr.H();t.classList.add("mysr-form-moyasarForm"),t.id="mysr-form-form-el",t.setAttribute("payment-form","true"),wr.$()&&t.classList.add("mysr-form-fixedWidth"),function(r,n,t){var i,o,e;y.v&&y.v(r,n),o=(i=t===O)?null:t&&t._||n._,r=E(x,null,[r]),e=[],V(n,(i?n:t||n)._=r,o||P,P,void 0!==n.ownerSVGElement,t&&!i?[t]:o?null:n.childNodes.length?k.slice.call(n.childNodes):null,e,t||P,i),K(e,r)}(E(n,null),t)},n.version="v1.5.0",n}(M)},280:function(){"function"!==typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(r,n){if(null===r||void 0===r)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(r),i=1;i<arguments.length;i++){var o=arguments[i];if(null!==o&&void 0!==o)for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t},writable:!0,configurable:!0})},70:function(){"function"!==typeof Object.entries&&(Object.entries=function(r){for(var n=Object.keys(r),t=n.length,i=new Array(t);t--;)i[t]=[n[t],r[n[t]]];return i})},624:function(){"function"!==typeof String.prototype.padStart&&(String.prototype.padStart=function(r,n){return r>>=0,n=String("undefined"!==typeof n?n:" "),this.length>r?String(this):((r-=this.length)>n.length&&(n+=n.repeat(r/n.length)),n.slice(0,r)+String(this))})}},n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{}};return r[i](o,o.exports,t),o.exports}return t.d=function(r,n){for(var i in n)t.o(n,i)&&!t.o(r,i)&&Object.defineProperty(r,i,{enumerable:!0,get:n[i]})},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"===typeof window)return window}}(),t.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},t(838)}().default},"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports.Moyasar=n():this.Moyasar=n();
//# sourceMappingURL=moyasar.js.map